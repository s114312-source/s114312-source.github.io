<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ‡æ°´æœéŠæˆ²</title>
    <style>
        body { 
            margin: 0; padding: 0; overflow: hidden; 
            background-color: #000; user-select: none;
            font-family: 'Arial', 'Microsoft JhengHei', sans-serif;
            touch-action: none; /* é˜²æ­¢è¡Œå‹•è£ç½®ä¸Šçš„æ‰‹å‹¢å¹²æ“¾ */
        }

        /* æ•¸æ“šé¡¯ç¤ºæ¬„ */
        #hud-top {
            position: fixed; 
            top: 15px; left: 0; width: 100%;
            display: flex; justify-content: space-between;
            padding: 0 25px; box-sizing: border-box;
            z-index: 50; /* ä½æ–¼é¸å–®ï¼Œä½†é«˜æ–¼ç•«å¸ƒ */
            pointer-events: none; /* è®“æ»‘é¼ ç©¿é€æ•¸æ“šæ¡†ï¼Œä¸å½±éŸ¿åˆ‡æ› */
        }

        .data-box {
            background: rgba(255, 255, 255, 0.1); 
            color: #ffffff; 
            padding: 10px 20px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.5); 
            font-size: 24px;
            font-weight: bold;
            min-width: 140px;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        canvas { 
            display: block; 
            position: absolute;
            top: 0; left: 0;
            z-index: 1; 
        }

        /* é¸å–®èˆ‡çµæŸç•«é¢ */
        .overlay {
            position: fixed; 
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(30, 30, 30, 0.98);
            color: #ffffff; 
            padding: 40px; 
            border-radius: 20px;
            text-align: center; 
            z-index: 9999; /* ç¢ºä¿åœ¨æœ€æœ€æœ€ä¸Šå±¤ */
            border: 2px solid #ffffff; 
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
            pointer-events: auto; /* å¼·åˆ¶é–‹å•Ÿé»æ“Šåµæ¸¬ */
        }

        h1 { margin: 0 0 20px 0; font-size: 32px; color: #ffffff; }
        p { font-size: 18px; margin-bottom: 10px; }

        input {
            width: 100px; padding: 12px; font-size: 20px;
            margin-bottom: 20px; text-align: center;
            border-radius: 8px; border: 1px solid #ffffff;
            background: #222; color: #fff;
        }

        /* éŠæˆ²æŒ‰éˆ•ï¼šå¢åŠ æ›´æ˜é¡¯çš„äº’å‹•æ„Ÿ */
        .btn-start {
            background: #ffffff; color: #000000; border: none;
            padding: 15px 50px; font-size: 22px; cursor: pointer;
            border-radius: 10px; font-weight: bold;
            display: inline-block;
            transition: transform 0.1s, background 0.3s;
        }
        .btn-start:hover { background: #dddddd; transform: scale(1.05); }
        .btn-start:active { transform: scale(0.95); }

        #game-over-ui { display: none; }
    </style>
</head>
<body>

    <div id="hud-top">
        <div id="score-display" class="data-box">å¾—åˆ†: 0</div>
        <div id="timer-display" class="data-box">æ™‚é–“: --</div>
    </div>
    
    <div id="start-menu" class="overlay">
        <h1>æ°´æœæŒ‘æˆ°</h1>
        <p>è¨­å®šéŠæˆ²ç§’æ•¸ï¼š</p>
        <input type="number" id="time-input" value="60" min="5">
        <p><small style="color: #ff5252;">æ³¨æ„ï¼šåˆ‡åˆ°ç‚¸å½ˆ ğŸ’£ æ‰£ 20 åˆ†ï¼</small></p>
        <button class="btn-start" onclick="beginGame()">é–‹å§‹éŠæˆ²</button>
    </div>

    <div id="game-over-ui" class="overlay">
        <h1>æ™‚é–“åˆ°</h1>
        <p id="final-score" style="font-size: 28px; margin: 20px 0;">å¾—åˆ†: 0</p>
        <button class="btn-start" onclick="location.reload()">é‡æ–°æŒ‘æˆ°</button>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('score-display');
        const timerDisplay = document.getElementById('timer-display');
        const startMenu = document.getElementById('start-menu');
        const gameOverUI = document.getElementById('game-over-ui');
        const finalScoreText = document.getElementById('final-score');

        // ç¢ºä¿ç•«å¸ƒæ­£ç¢ºå¡«æ»¿è¦–çª—
        function handleResize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', handleResize);
        handleResize();

        let score = 0;
        let timeLeft = 0;
        let gameActive = false;
        let gameItems = [];
        let slicedParts = [];
        let mouseTrail = [];
        let countdownTimer;
        
        const GRAVITY = 0.22; // æ…¢é€Ÿé‡åŠ›
        const FRUITS = ['ğŸ', 'ğŸŠ', 'ğŸ‰', 'ğŸ', 'ğŸ“', 'ğŸ¥', 'ğŸ‡', 'ğŸ‹'];

        // å•Ÿå‹•éŠæˆ²çš„é—œéµå‡½æ•¸
        function beginGame() {
            const timeVal = document.getElementById('time-input').value;
            timeLeft = parseInt(timeVal) || 60;
            score = 0;
            gameActive = true;
            gameItems = [];
            slicedParts = [];
            
            scoreDisplay.innerText = `å¾—åˆ†: ${score}`;
            timerDisplay.innerText = `æ™‚é–“: ${timeLeft}`;
            
            startMenu.style.display = 'none';
            gameOverUI.style.display = 'none';

            // è¨ˆæ™‚å™¨é‚è¼¯
            if (countdownTimer) clearInterval(countdownTimer);
            countdownTimer = setInterval(() => {
                if (gameActive) {
                    timeLeft--;
                    timerDisplay.innerText = `æ™‚é–“: ${timeLeft}`;
                    if (timeLeft
